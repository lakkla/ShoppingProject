import{_ as g,u as f,r as b,j as C,o as a,c as o,g as N,d as s,F as _,l as u,t as i,m as p}from"./index-ecdd9460.js";import{H as $}from"./Header-0f98523e.js";import{o as d}from"./index-dd35b931.js";const w={class:"container"},L={key:0,class:"empty-order"},D={key:1,class:"order-list"},x={class:"order-header"},B={class:"order-body"},O={class:"order-items"},V={class:"item-image"},A=["src","alt"],F={key:1,class:"no-image"},H={class:"item-info"},j={class:"item-name"},q={class:"item-price"},z={class:"order-info"},E={class:"order-total"},I={class:"order-status"},M={key:0,class:"status-pending"},R={key:1,class:"status-paid"},S={key:2,class:"status-shipped"},T={key:3,class:"status-completed"},G={key:4,class:"status-cancelled"},J={class:"order-actions"},K=["onClick"],P=["onClick"],Q=["onClick"],U={__name:"List",setup(W){const m=f(),l=b([]),r=async()=>{try{const n=await d.list();n.code===200&&(l.value=n.data)}catch(n){console.error("加载订单失败",n)}},h=n=>n?new Date(n).toLocaleString("zh-CN"):"",v=n=>{m.push(`/order/detail/${n}`)},y=async n=>{try{const t=await d.pay(n);t.code===200?(alert(t.message),r()):alert(t.message)}catch{alert("支付失败")}},k=async n=>{if(confirm("确定要取消该订单吗？"))try{const t=await d.cancel(n);t.code===200?(alert(t.message),r()):alert(t.message)}catch{alert("取消失败")}};return C(()=>{r()}),(n,t)=>(a(),o("div",null,[N($),s("div",w,[t[2]||(t[2]=s("h2",{class:"page-title"},"我的订单",-1)),l.value.length===0?(a(),o("div",L,[t[1]||(t[1]=s("p",null,"暂无订单",-1)),s("button",{onClick:t[0]||(t[0]=e=>n.$router.push("/product/list"))},"去购物")])):(a(),o("div",D,[(a(!0),o(_,null,u(l.value,e=>(a(),o("div",{class:"order-card",key:e.id},[s("div",x,[s("span",null,"订单号："+i(e.orderNo),1),s("span",null,"收货地址："+i(e.address),1),s("span",null,"下单时间："+i(h(e.createTime)),1)]),s("div",B,[s("div",O,[(a(!0),o(_,null,u(e.items,c=>(a(),o("div",{class:"order-item",key:c.id},[s("div",V,[c.image?(a(),o("img",{key:0,src:c.image,alt:c.productName},null,8,A)):(a(),o("div",F,"无图"))]),s("div",H,[s("div",j,i(c.productName),1),s("div",q,"¥"+i(c.price)+" × "+i(c.quantity),1)])]))),128))]),s("div",z,[s("div",E,"总价：¥"+i(e.totalAmount),1),s("div",I,[e.status===0?(a(),o("span",M,"待支付")):e.status===1?(a(),o("span",R,"已支付")):e.status===2?(a(),o("span",S,"已发货")):e.status===3?(a(),o("span",T,"已完成")):(a(),o("span",G,"已取消"))]),s("div",J,[s("button",{onClick:c=>v(e.id),class:"btn btn-detail"},"查看详情",8,K),e.status===0?(a(),o("button",{key:0,onClick:c=>y(e.id),class:"btn btn-pay"},"去支付",8,P)):p("",!0),e.status===0?(a(),o("button",{key:1,onClick:c=>k(e.id),class:"btn btn-cancel"},"取消订单",8,Q)):p("",!0)])])])]))),128))]))])]))}},ss=g(U,[["__scopeId","data-v-23adeda9"]]);export{ss as default};
