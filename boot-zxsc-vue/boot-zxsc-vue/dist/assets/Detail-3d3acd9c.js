import{_ as f,u as m,i as b,r as k,j as g,o as l,c as o,g as h,d as s,t as r,F as w,l as N,f as D,m as i}from"./index-ecdd9460.js";import{H as x}from"./Header-0f98523e.js";import{o as d}from"./index-dd35b931.js";const C={class:"container"},V={key:0,class:"detail-card"},B={class:"info-section"},F={class:"info-row"},O={class:"info-row"},q={class:"info-row"},A={key:0,class:"status-pending"},H={key:1,class:"status-paid"},L={key:2,class:"status-shipped"},R={key:3,class:"status-completed"},T={key:4,class:"status-cancelled"},$={class:"info-section"},j={class:"info-row"},z={class:"info-section"},E={class:"product-info"},I={class:"product-image"},M=["src","alt"],S={key:1,class:"no-image"},G={class:"total-price"},J={class:"action-buttons"},K={__name:"Detail",setup(P){const c=m(),p=b(),a=k(null),u=async()=>{try{const e=await d.detail(p.params.id);e.code===200&&(a.value=e.data)}catch(e){console.error("加载订单失败",e)}},_=e=>e?new Date(e).toLocaleString("zh-CN"):"",v=async()=>{try{const e=await d.pay(a.value.id);e.code===200?(alert(e.message),u()):alert(e.message)}catch{alert("支付失败")}},y=async()=>{if(confirm("确定要取消该订单吗？"))try{const e=await d.cancel(a.value.id);e.code===200?(alert(e.message),c.push("/order/list")):alert(e.message)}catch{alert("取消失败")}};return g(()=>{u()}),(e,t)=>(l(),o("div",null,[h(x),s("div",C,[a.value?(l(),o("div",V,[t[10]||(t[10]=s("h2",{class:"page-title"},"订单详情",-1)),s("div",B,[t[4]||(t[4]=s("h3",null,"订单信息",-1)),s("div",F,[t[1]||(t[1]=s("span",{class:"label"},"订单号：",-1)),s("span",null,r(a.value.orderNo),1)]),s("div",O,[t[2]||(t[2]=s("span",{class:"label"},"下单时间：",-1)),s("span",null,r(_(a.value.createTime)),1)]),s("div",q,[t[3]||(t[3]=s("span",{class:"label"},"订单状态：",-1)),a.value.status===0?(l(),o("span",A,"待支付")):a.value.status===1?(l(),o("span",H,"已支付")):a.value.status===2?(l(),o("span",L,"已发货")):a.value.status===3?(l(),o("span",R,"已完成")):(l(),o("span",T,"已取消"))])]),s("div",$,[t[6]||(t[6]=s("h3",null,"收货信息",-1)),s("div",j,[t[5]||(t[5]=s("span",{class:"label"},"收货地址：",-1)),s("span",null,r(a.value.address),1)])]),s("div",z,[t[9]||(t[9]=s("h3",null,"商品清单",-1)),s("table",null,[t[7]||(t[7]=s("thead",null,[s("tr",null,[s("th",null,"商品信息"),s("th",null,"单价"),s("th",null,"数量"),s("th",null,"小计")])],-1)),s("tbody",null,[(l(!0),o(w,null,N(a.value.items,n=>(l(),o("tr",{key:n.id},[s("td",null,[s("div",E,[s("div",I,[n.image?(l(),o("img",{key:0,src:n.image,alt:n.productName},null,8,M)):(l(),o("div",S,"无图"))]),s("span",null,r(n.productName),1)])]),s("td",null,"¥"+r(n.price),1),s("td",null,r(n.quantity),1),s("td",null,"¥"+r((n.price*n.quantity).toFixed(2)),1)]))),128))])]),s("div",G,[t[8]||(t[8]=D(" 订单总价：",-1)),s("span",null,"¥"+r(a.value.totalAmount),1)])]),s("div",J,[s("button",{onClick:t[0]||(t[0]=n=>e.$router.back()),class:"btn btn-secondary"},"返回"),a.value.status===0?(l(),o("button",{key:0,onClick:v,class:"btn btn-primary"},"去支付")):i("",!0),a.value.status===0?(l(),o("button",{key:1,onClick:y,class:"btn btn-cancel"},"取消订单")):i("",!0)])])):i("",!0)])]))}},X=f(K,[["__scopeId","data-v-412fa36c"]]);export{X as default};
