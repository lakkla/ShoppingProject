import{_ as f,u as v,r as b,j as g,o as a,c as o,g as y,d as t,F as k,l as C,t as l,n as i,m as D}from"./index-ecdd9460.js";import{A as L}from"./AdminSidebar-38f02eac.js";import{a as c}from"./index-dd35b931.js";const U={class:"admin-layout"},x={class:"main-content"},N=["onClick"],w=["onClick"],A={__name:"UserList",setup(B){const u=v(),r=b([]),d=async()=>{try{const s=await c.userList();s.code===200&&(r.value=s.data)}catch(s){console.error("加载用户列表失败",s)}},m=s=>s?new Date(s).toLocaleDateString("zh-CN"):"",_=s=>{u.push(`/admin/user/edit?id=${s}`)},p=async s=>{if(confirm("确定要删除该用户吗？"))try{const n=await c.userDelete(s);n.code===200?(alert(n.message),d()):alert(n.message)}catch{alert("删除失败")}};return g(()=>{d()}),(s,n)=>(a(),o("div",U,[y(L),t("div",x,[n[1]||(n[1]=t("div",{class:"page-header"},[t("h2",{class:"page-title"},"用户管理")],-1)),t("table",null,[n[0]||(n[0]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"用户名"),t("th",null,"姓名"),t("th",null,"手机号"),t("th",null,"邮箱"),t("th",null,"角色"),t("th",null,"状态"),t("th",null,"创建时间"),t("th",null,"操作")])],-1)),t("tbody",null,[(a(!0),o(k,null,C(r.value,e=>(a(),o("tr",{key:e.id},[t("td",null,l(e.id),1),t("td",null,l(e.username),1),t("td",null,l(e.name),1),t("td",null,l(e.phone),1),t("td",null,l(e.email),1),t("td",null,[t("span",{class:i(["role-badge",e.role===1?"role-admin":"role-user"])},l(e.role===1?"管理员":"普通用户"),3)]),t("td",null,[t("span",{class:i(["status-badge",e.status===1?"status-active":"status-inactive"])},l(e.status===1?"启用":"禁用"),3)]),t("td",null,l(m(e.createTime)),1),t("td",null,[t("button",{class:"btn btn-edit",onClick:h=>_(e.id)},"编辑",8,N),e.role!==1?(a(),o("button",{key:0,class:"btn btn-delete",onClick:h=>p(e.id)},"删除",8,w)):D("",!0)])]))),128))])])])]))}},F=f(A,[["__scopeId","data-v-df786340"]]);export{F as default};
