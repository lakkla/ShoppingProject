import{_ as b,u as k,i as g,r as l,j as h,o as n,c as i,g as f,d as t,t as c,e as x,v as D,m as C}from"./index-ecdd9460.js";import{H as w}from"./Header-0f98523e.js";import{p as B,c as N}from"./index-dd35b931.js";const V={class:"container"},q={key:0,class:"detail-card"},A={class:"product-image"},H=["src","alt"],I={key:1,class:"no-image"},M={class:"product-info"},Q={class:"product-name"},R={class:"product-price"},T={class:"product-category"},j={class:"product-stock"},E={class:"product-description"},F={class:"quantity-selector"},P=["max"],S={__name:"Detail",setup(U){const r=k(),d=g(),e=l(null),o=l(1),u=async()=>{try{const a=await B.detail(d.params.id);a.code===200&&(e.value=a.data)}catch(a){console.error("加载商品失败",a)}},_=()=>{o.value<e.value.stock&&o.value++},p=()=>{o.value>1&&o.value--},v=async()=>{try{const a=new FormData;a.append("productId",e.value.id),a.append("quantity",o.value);const s=await N.add(a);s.code,alert(s.message)}catch{alert("请先登录"),r.push("/login")}},m=()=>{r.back()};return h(()=>{u()}),(a,s)=>(n(),i("div",null,[f(w),t("div",V,[e.value?(n(),i("div",q,[t("div",A,[e.value.image?(n(),i("img",{key:0,src:e.value.image,alt:e.value.name},null,8,H)):(n(),i("div",I,"暂无图片"))]),t("div",M,[t("div",Q,c(e.value.name),1),t("div",R,"¥"+c(e.value.price),1),t("div",T,"分类："+c(e.value.categoryName),1),t("div",j,"库存："+c(e.value.stock),1),t("div",E,c(e.value.description),1),t("div",F,[s[1]||(s[1]=t("span",null,"数量：",-1)),t("button",{onClick:p},"-"),x(t("input",{"onUpdate:modelValue":s[0]||(s[0]=y=>o.value=y),type:"number",min:"1",max:e.value.stock},null,8,P),[[D,o.value,void 0,{number:!0}]]),t("button",{onClick:_},"+")]),t("div",{class:"action-buttons"},[t("button",{class:"btn btn-primary",onClick:v},"加入购物车"),t("button",{class:"btn btn-secondary",onClick:m},"返回")])])])):C("",!0)])]))}},K=b(S,[["__scopeId","data-v-a218bb7a"]]);export{K as default};
