import{_ as g,u as p,r as f,j as y,o as l,c as o,g as v,d as t,F as k,l as C,t as a,n as P}from"./index-ecdd9460.js";import{A as D}from"./AdminSidebar-38f02eac.js";import{a as d}from"./index-dd35b931.js";const L={class:"admin-layout"},x={class:"main-content"},N=["src","alt"],w={key:1,class:"no-image"},A=["onClick"],B=["onClick"],$={__name:"ProductList",setup(z){const c=p(),i=f([]),r=async()=>{try{const s=await d.productList();s.code===200&&(i.value=s.data)}catch(s){console.error("加载商品列表失败",s)}},u=s=>s?new Date(s).toLocaleDateString("zh-CN"):"",m=()=>{c.push("/admin/product/edit")},_=s=>{c.push(`/admin/product/edit?id=${s}`)},h=async s=>{if(confirm("确定要删除该商品吗？"))try{const n=await d.productDelete(s);n.code===200?(alert(n.message),r()):alert(n.message)}catch{alert("删除失败")}};return y(()=>{r()}),(s,n)=>(l(),o("div",L,[v(D),t("div",x,[t("div",{class:"page-header"},[n[0]||(n[0]=t("h2",{class:"page-title"},"商品管理",-1)),t("button",{class:"btn-add",onClick:m},"添加商品")]),t("table",null,[n[1]||(n[1]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"图片"),t("th",null,"商品名称"),t("th",null,"分类"),t("th",null,"价格"),t("th",null,"库存"),t("th",null,"状态"),t("th",null,"创建时间"),t("th",null,"操作")])],-1)),t("tbody",null,[(l(!0),o(k,null,C(i.value,e=>(l(),o("tr",{key:e.id},[t("td",null,a(e.id),1),t("td",null,[e.image?(l(),o("img",{key:0,src:e.image,alt:e.name,class:"product-thumb"},null,8,N)):(l(),o("span",w,"无图片"))]),t("td",null,a(e.name),1),t("td",null,a(e.categoryName),1),t("td",null,"¥"+a(e.price),1),t("td",null,a(e.stock),1),t("td",null,[t("span",{class:P(["status-badge",e.status===1?"status-active":"status-inactive"])},a(e.status===1?"上架":"下架"),3)]),t("td",null,a(u(e.createTime)),1),t("td",null,[t("button",{class:"btn btn-edit",onClick:b=>_(e.id)},"编辑",8,A),t("button",{class:"btn btn-delete",onClick:b=>h(e.id)},"删除",8,B)])]))),128))])])])]))}},V=g($,[["__scopeId","data-v-cb07b5c7"]]);export{V as default};
